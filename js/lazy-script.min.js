document.addEventListener("DOMContentLoaded", function() {
    const lazyElements = document.querySelectorAll('.lazy');
    
    function loadResource(element) {
        const tagName = element.tagName.toLowerCase();
        const dataSrc = element.getAttribute('data-src');
        
        if (tagName === 'img') {
            element.src = dataSrc;
            element.onload = () => element.classList.add('loaded');
        } else if (tagName === 'video') {
            element.src = dataSrc;
            element.load();
            element.onloadeddata = () => element.classList.add('loaded');
        }
        element.classList.remove('lazy');
    }
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                loadResource(entry.target);
                observer.unobserve(entry.target);
            }
        });
    }, {
        rootMargin: '0px 0px 50px 0px',
        threshold: 0.1
    });
    
    lazyElements.forEach(element => observer.observe(element));
});
